spring.application.name=jobpulse
spring.profiles.active=${PROFILE:dev}

# ==================== Server Configuration ====================
server.port=${SERVER_PORT:8080}
# server.servlet.context-path=/api
server.error.include-message=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# ==================== PostgreSQL Configuration ====================
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:jobpulse}
spring.datasource.username=${DB_USERNAME:amine}
spring.datasource.password=${DB_PASSWORD:amine}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# ==================== JPA/Hibernate Configuration ====================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ==================== Flyway Configuration ====================
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# ==================== Redis Configuration ====================
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=60000ms
spring.data.redis.jedis.pool.max-active=${REDIS_POOL_SIZE:20}
spring.data.redis.jedis.pool.max-idle=10
spring.data.redis.jedis.pool.min-idle=5

# ==================== JWT Configuration ====================
jwt.secret=${JWT_SECRET:h4kK6bh5YHZ6xXGbiWg8rk0Ny9w03yYzv8ZIHamepT2NSSxpkoG1qBuRRWxloNZ+HSWPAT2Y+n1vgIuKuloRog==}
jwt.access-token-expiration-ms=${JWT_EXPIRATION:3600000}
jwt.refresh-token-expiration-ms=604800000

# ==================== Job Scheduling Configuration ====================
spring.task.scheduling.pool.size=${SCHEDULER_POOL_SIZE:10}
spring.task.scheduling.thread-name-prefix=job-scheduler-
spring.task.execution.pool.core-size=${EXECUTOR_CORE_SIZE:10}
spring.task.execution.pool.max-size=${EXECUTOR_MAX_SIZE:20}
spring.task.execution.thread-name-prefix=job-executor-

# Job execution settings
job.scheduler.interval-ms=60000
job.max-execution-timeout-seconds=300
job.max-concurrent-jobs=10

# ==================== Logging Configuration ====================
logging.level.root=INFO
logging.level.com.jobpulse=DEBUG
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ==================== Actuator Configuration ====================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.health.mail.enabled=false
management.metrics.export.prometheus.enabled=true

# ==================== Mail Configuration ====================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ==================== OAuth Configuration ====================
oauth.google.client-id=${GOOGLE_CLIENT_ID:}
oauth.google.client-secret=${GOOGLE_CLIENT_SECRET:}
oauth.google.redirect-uri=${GOOGLE_REDIRECT_URI:http://localhost:4200/google/callback}
oauth.github.client-id=${GITHUB_CLIENT_ID:}
oauth.github.client-secret=${GITHUB_CLIENT_SECRET:}

# ==================== Gmail OAuth Configuration ====================
gmail.oauth.client-id=${GMAIL_OAUTH_CLIENT_ID:}
gmail.oauth.client-secret=${GMAIL_OAUTH_CLIENT_SECRET:}
gmail.oauth.redirect-uri=${GMAIL_OAUTH_REDIRECT_URI:http://localhost:4200/google/callback}
gmail.oauth.token-encryption-key=${GMAIL_TOKEN_ENCRYPTION_KEY:jobpulse-gmail-token-encryption-secret-key-change-in-prod}
